"use strict";(self.webpackChunk_feature_sliced_documentation=self.webpackChunk_feature_sliced_documentation||[]).push([["1624"],{6254:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,toc:()=>h,default:()=>p,metadata:()=>i,assets:()=>d,contentTitle:()=>o});var i=JSON.parse('{"id":"guides/examples/api-requests","title":"X\u1EED l\xfd API Requests","description":"handling-api-requests}","source":"@site/i18n/vi/docusaurus-plugin-content-docs/current/guides/examples/api-requests.mdx","sourceDirName":"guides/examples","slug":"/guides/examples/api-requests","permalink":"/vi/docs/guides/examples/api-requests","draft":false,"unlisted":false,"editUrl":"https://github.com/feature-sliced/documentation/edit/master/i18n/vi/docusaurus-plugin-content-docs/current/guides/examples/api-requests.mdx","tags":[],"version":"current","lastUpdatedAt":1770311679000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Page layouts","permalink":"/vi/docs/guides/examples/page-layout"},"next":{"title":"From a custom architecture","permalink":"/vi/docs/guides/migration/from-custom"}}'),s=t(5813),r=t(6436),a=t(6997),c=t(1732);let l={sidebar_position:4},o="X\u1EED l\xfd API Requests {#handling-api-requests}",d={},h=[{value:"Shared API Requests",id:"shared-api-requests",level:2},{value:"Slice-Specific API Requests",id:"slice-specific-api-requests",level:2},{value:"S\u1EED d\u1EE5ng Client Generators",id:"client-generators",level:2},{value:"T\xedch h\u1EE3p v\u1EDBi Server State Libraries",id:"server-state-libraries",level:2}];function u(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"handling-api-requests",children:"X\u1EED l\xfd API Requests"})}),"\n",(0,s.jsx)(n.h2,{id:"shared-api-requests",children:"Shared API Requests"}),"\n",(0,s.jsxs)(n.p,{children:["B\u1EAFt \u0111\u1EA7u b\u1EB1ng c\xe1ch \u0111\u1EB7t logic API request chung trong th\u01B0 m\u1EE5c ",(0,s.jsx)(n.code,{children:"shared/api"}),". \u0110i\u1EC1u n\xe0y gi\xfap d\u1EC5 d\xe0ng t\xe1i s\u1EED d\u1EE5ng c\xe1c request trong to\xe0n b\u1ED9 \u1EE9ng d\u1EE5ng v\xe0 h\u1ED7 tr\u1EE3 prototyping nhanh h\u01A1n. \u0110\u1ED1i v\u1EDBi nhi\u1EC1u d\u1EF1 \xe1n, \u0111\xe2y l\xe0 t\u1EA5t c\u1EA3 nh\u1EEFng g\xec b\u1EA1n c\u1EA7n cho c\xe1c API call."]}),"\n",(0,s.jsx)(n.p,{children:"C\u1EA5u tr\xfac file \u0111i\u1EC3n h\xecnh s\u1EBD l\xe0:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u{1F4C2} shared","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u{1F4C2} api","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u{1F4C4} client.ts"}),"\n",(0,s.jsx)(n.li,{children:"\u{1F4C4} index.ts"}),"\n",(0,s.jsxs)(n.li,{children:["\u{1F4C2} endpoints","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u{1F4C4} login.ts"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["File ",(0,s.jsx)(n.code,{children:"client.ts"})," t\u1EADp trung thi\u1EBFt l\u1EADp HTTP request c\u1EE7a b\u1EA1n. N\xf3 bao b\u1ECDc ph\u01B0\u01A1ng th\u1EE9c b\u1EA1n ch\u1ECDn (nh\u01B0 ",(0,s.jsx)(n.code,{children:"fetch()"})," ho\u1EB7c m\u1ED9t instance ",(0,s.jsx)(n.code,{children:"axios"}),") v\xe0 x\u1EED l\xfd c\xe1c c\u1EA5u h\xecnh chung, ch\u1EB3ng h\u1EA1n nh\u01B0:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Backend base URL."}),"\n",(0,s.jsx)(n.li,{children:"Default headers (v\xed d\u1EE5, cho authentication)."}),"\n",(0,s.jsx)(n.li,{children:"Data serialization."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["D\u01B0\u1EDBi \u0111\xe2y l\xe0 c\xe1c v\xed d\u1EE5 cho ",(0,s.jsx)(n.code,{children:"axios"})," v\xe0 ",(0,s.jsx)(n.code,{children:"fetch"}),":"]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(c.A,{value:"axios",label:"Axios",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="shared/api/client.ts"',children:"// Example using axios\nimport axios from 'axios';\n\nexport const client = axios.create({\n  baseURL: 'https://your-api-domain.com/api/',\n  timeout: 5000,\n  headers: { 'X-Custom-Header': 'my-custom-value' }\n});\n"})})}),(0,s.jsx)(c.A,{value:"fetch",label:"Fetch",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="shared/api/client.ts"',children:"export const client = {\n  async post(endpoint: string, body: any, options?: RequestInit) {\n    const response = await fetch(`https://your-api-domain.com/api${endpoint}`, {\n      method: 'POST',\n      body: JSON.stringify(body),\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Custom-Header': 'my-custom-value',\n        ...options?.headers,\n      },\n    });\n    return response.json();\n  }\n  // ... other methods like put, delete, etc.\n};\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["T\u1ED5 ch\u1EE9c c\xe1c function API request ri\xeang l\u1EBB c\u1EE7a b\u1EA1n trong ",(0,s.jsx)(n.code,{children:"shared/api/endpoints"}),", nh\xf3m ch\xfang theo API endpoint."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["\u0110\u1EC3 gi\u1EEF c\xe1c v\xed d\u1EE5 t\u1EADp trung, ch\xfang t\xf4i b\u1ECF qua form interaction v\xe0 validation. \u0110\u1EC3 bi\u1EBFt chi ti\u1EBFt v\u1EC1 c\xe1c th\u01B0 vi\u1EC7n nh\u01B0 Zod ho\u1EB7c Valibot, h\xe3y tham kh\u1EA3o b\xe0i vi\u1EBFt ",(0,s.jsx)(n.a,{href:"/docs/guides/examples/types#type-validation-schemas-and-zod",children:"Type Validation v\xe0 Schemas"}),"."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="shared/api/endpoints/login.ts"',children:"import { client } from '../client';\n\nexport interface LoginCredentials {\n  email: string;\n  password: string;\n}\n\nexport function login(credentials: LoginCredentials) {\n  return client.post('/login', credentials);\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["S\u1EED d\u1EE5ng file ",(0,s.jsx)(n.code,{children:"index.ts"})," trong ",(0,s.jsx)(n.code,{children:"shared/api"})," \u0111\u1EC3 export c\xe1c function request c\u1EE7a b\u1EA1n."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="shared/api/index.ts"',children:"export { client } from './client'; // N\u1EBFu b\u1EA1n mu\u1ED1n export client\nexport { login } from './endpoints/login';\nexport type { LoginCredentials } from './endpoints/login';\n"})}),"\n",(0,s.jsx)(n.h2,{id:"slice-specific-api-requests",children:"Slice-Specific API Requests"}),"\n",(0,s.jsx)(n.p,{children:"N\u1EBFu m\u1ED9t API request ch\u1EC9 \u0111\u01B0\u1EE3c s\u1EED d\u1EE5ng b\u1EDFi m\u1ED9t slice c\u1EE5 th\u1EC3 (nh\u01B0 m\u1ED9t page ho\u1EB7c feature \u0111\u01A1n l\u1EBB) v\xe0 s\u1EBD kh\xf4ng \u0111\u01B0\u1EE3c t\xe1i s\u1EED d\u1EE5ng, h\xe3y \u0111\u1EB7t n\xf3 trong segment api c\u1EE7a slice \u0111\xf3. \u0110i\u1EC1u n\xe0y gi\xfap logic slice-specific \u0111\u01B0\u1EE3c ch\u1EE9a \u0111\xf3ng m\u1ED9t c\xe1ch g\u1ECDn g\xe0ng."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u{1F4C2} pages","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u{1F4C2} login","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u{1F4C4} index.ts"}),"\n",(0,s.jsxs)(n.li,{children:["\u{1F4C2} api","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u{1F4C4} login.ts"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u{1F4C2} ui","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u{1F4C4} LoginPage.tsx"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="pages/login/api/login.ts"',children:"import { client } from 'shared/api';\n\ninterface LoginCredentials {\n  email: string;\n  password: string;\n}\n\nexport function login(credentials: LoginCredentials) {\n  return client.post('/login', credentials);\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["B\u1EA1n kh\xf4ng c\u1EA7n export function ",(0,s.jsx)(n.code,{children:"login()"})," trong public API c\u1EE7a page, v\xec kh\xf4ng c\xf3 kh\u1EA3 n\u0103ng n\u01A1i n\xe0o kh\xe1c trong app s\u1EBD c\u1EA7n request n\xe0y."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Tr\xe1nh \u0111\u1EB7t API calls v\xe0 response types trong layer ",(0,s.jsx)(n.code,{children:"entities"})," qu\xe1 s\u1EDBm. Backend responses c\xf3 th\u1EC3 kh\xe1c v\u1EDBi nh\u1EEFng g\xec frontend entities c\u1EE7a b\u1EA1n c\u1EA7n. Logic API trong ",(0,s.jsx)(n.code,{children:"shared/api"})," ho\u1EB7c segment ",(0,s.jsx)(n.code,{children:"api"})," c\u1EE7a slice cho ph\xe9p b\u1EA1n transform data m\u1ED9t c\xe1ch ph\xf9 h\u1EE3p, gi\u1EEF cho entities t\u1EADp trung v\xe0o c\xe1c m\u1ED1i quan t\xe2m c\u1EE7a frontend."]})}),"\n",(0,s.jsx)(n.h2,{id:"client-generators",children:"S\u1EED d\u1EE5ng Client Generators"}),"\n",(0,s.jsxs)(n.p,{children:["N\u1EBFu backend c\u1EE7a b\u1EA1n c\xf3 OpenAPI specification, c\xe1c c\xf4ng c\u1EE5 nh\u01B0 ",(0,s.jsx)(n.a,{href:"https://orval.dev/",children:"orval"})," ho\u1EB7c ",(0,s.jsx)(n.a,{href:"https://openapi-ts.dev/",children:"openapi-typescript"})," c\xf3 th\u1EC3 generate API types v\xe0 request functions cho b\u1EA1n. \u0110\u1EB7t code \u0111\u01B0\u1EE3c generate trong, v\xed d\u1EE5, ",(0,s.jsx)(n.code,{children:"shared/api/openapi"}),". \u0110\u1EA3m b\u1EA3o bao g\u1ED3m ",(0,s.jsx)(n.code,{children:"README.md"})," \u0111\u1EC3 document nh\u1EEFng types \u0111\xf3 l\xe0 g\xec v\xe0 c\xe1ch generate ch\xfang."]}),"\n",(0,s.jsx)(n.h2,{id:"server-state-libraries",children:"T\xedch h\u1EE3p v\u1EDBi Server State Libraries"}),"\n",(0,s.jsxs)(n.p,{children:["Khi s\u1EED d\u1EE5ng server state libraries nh\u01B0 ",(0,s.jsx)(n.a,{href:"https://tanstack.com/query/latest",children:"TanStack Query (React Query)"})," ho\u1EB7c ",(0,s.jsx)(n.a,{href:"https://pinia-colada.esm.dev/",children:"Pinia Colada"}),", b\u1EA1n c\xf3 th\u1EC3 c\u1EA7n chia s\u1EBB types ho\u1EB7c cache keys gi\u1EEFa c\xe1c slices. S\u1EED d\u1EE5ng layer ",(0,s.jsx)(n.code,{children:"shared"})," cho nh\u1EEFng th\u1EE9 nh\u01B0:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API data types"}),"\n",(0,s.jsx)(n.li,{children:"Cache keys"}),"\n",(0,s.jsx)(n.li,{children:"Common query/mutation options"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u0110\u1EC3 bi\u1EBFt th\xeam chi ti\u1EBFt v\u1EC1 c\xe1ch l\xe0m vi\u1EC7c v\u1EDBi server state libraries, h\xe3y tham kh\u1EA3o ",(0,s.jsx)(n.a,{href:"/docs/guides/tech/with-react-query",children:"b\xe0i vi\u1EBFt React Query"})]})]})}function p(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},1732:function(e,n,t){t.d(n,{A:()=>r});var i=t(5813);t(9729);var s=t(4014);function r({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)("tabItem_TKLW",t),hidden:n,children:e})}},6997:function(e,n,t){t.d(n,{A:()=>v});var i=t(5813),s=t(9729),r=t(4014),a=t(6620),c=t(6027),l=t(5470),o=t(6111),d=t(2012),h=t(1269),u=t(4508);function p(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function g({value:e,tabValues:n}){return n.some(n=>n.value===e)}var m=t(781);function x({className:e,block:n,selectedValue:t,selectValue:s,tabValues:a}){let l=[],{blockElementScrollPositionUntilNextRender:o}=(0,c.a_)(),d=e=>{let n=e.currentTarget,i=a[l.indexOf(n)].value;i!==t&&(o(n),s(i))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{let t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1]}}n?.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:s})=>(0,i.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{l.push(e)},onKeyDown:h,onClick:d,...s,className:(0,r.A)("tabs__item","tabItem_pNJB",s?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function f({lazy:e,children:n,selectedValue:t}){let a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=a.find(e=>e.props.value===t);return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function j(e){let n=function(e){let n,{defaultValue:t,queryString:i=!1,groupId:r}=e,a=function(e){let{values:n,children:t}=e;return(0,s.useMemo)(()=>{let e=n??p(t).map(({props:{value:e,label:n,attributes:t,default:i}})=>({value:e,label:n,attributes:t,default:i})),i=(0,h.XI)(e,(e,n)=>e.value===n.value);if(i.length>0)throw Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,t])}(e),[c,m]=(0,s.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let t=n.find(e=>e.default)??n[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:t,tabValues:a})),[x,f]=function({queryString:e=!1,groupId:n}){let t=(0,l.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(i),(0,s.useCallback)(e=>{if(!i)return;let n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})},[i,t])]}({queryString:i,groupId:r}),[j,v]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[t,i]=(0,u.Dv)(n);return[t,(0,s.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:r}),b=g({value:n=x??j,tabValues:a})?n:null;return(0,o.A)(()=>{b&&m(b)},[b]),{selectedValue:c,selectValue:(0,s.useCallback)(e=>{if(!g({value:e,tabValues:a}))throw Error(`Can't select invalid tab value=${e}`);m(e),f(e),v(e)},[f,v,a]),tabValues:a}}(e);return(0,i.jsxs)("div",{className:(0,r.A)(a.G.tabs.container,"tabs-container","tabList_nh3k"),children:[(0,i.jsx)(x,{...n,...e}),(0,i.jsx)(f,{...n,...e})]})}function v(e){let n=(0,m.A)();return(0,i.jsx)(j,{...e,children:p(e.children)},String(n))}},6436:function(e,n,t){t.d(n,{R:()=>a,x:()=>c});var i=t(9729);let s={},r=i.createContext(s);function a(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);