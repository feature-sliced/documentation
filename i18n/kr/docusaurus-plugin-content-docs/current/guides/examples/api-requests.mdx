---
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Handling API Requests

## Shared API Requests

Shared API request ë¡œì§ì€ `shared/api` í´ë”ì— ë‘ì„¸ìš”.  
ì´ë ‡ê²Œ í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ì†ì‰½ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì´ í´ë” êµ¬ì¡°ì™€ client.ts ì„¤ì •ë§Œìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.

ì¼ë°˜ì ì¸ íŒŒì¼ êµ¬ì¡° ì˜ˆì‹œ:
- ğŸ“‚ shared
    - ğŸ“‚ api
        - ğŸ“„ client.ts
        - ğŸ“„ index.ts
        - ğŸ“‚ endpoints
            - ğŸ“„ login.ts

`client.ts` íŒŒì¼ì€ HTTP request ê´€ë ¨ ì„¤ì •ì„ **í•œ ê³³ì—ì„œ** ê´€ë¦¬í•©ë‹ˆë‹¤.  
`fetch()` ë˜ëŠ” `axios` instanceì— ê³µí†µ ì„¤ì •ì„ ì ìš©í•˜ì—¬ ë‹¤ìŒì„ ì²˜ë¦¬í•©ë‹ˆë‹¤:

- ë°±ì—”ë“œ ê¸°ë³¸ URL  
- Default headers (ì˜ˆ: ì¸ì¦ header) 
- ë°ì´í„° ì§ë ¬í™”  

ì•„ë˜ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

<Tabs>

<TabItem value="axios" label="Axios">
```ts title="shared/api/client.ts"
// Axios ì˜ˆì‹œ
import axios from 'axios';

export const client = axios.create({
  baseURL: 'https://your-api-domain.com/api/',
  timeout: 5000,
  headers: { 'X-Custom-Header': 'my-custom-value' }
});
```
</TabItem>

<TabItem value="fetch" label="Fetch">
```ts title="shared/api/client.ts"
export const client = {
  async post(endpoint: string, body: any, options?: RequestInit) {
    const response = await fetch(`https://your-api-domain.com/api${endpoint}`, {
      method: 'POST',
      body: JSON.stringify(body),
      ...options,
      headers: {
        'Content-Type': 'application/json',
        'X-Custom-Header': 'my-custom-value',
        ...options?.headers,
      },
    });
    return response.json();
  }
  // ... other methods like put, delete, etc.
};
```
</TabItem>

</Tabs>

`shared/api/endpoints` í´ë”ì— endpointë³„ request í•¨ìˆ˜ë¥¼ ì •ë¦¬í•˜ì„¸ìš”.

:::note

ì˜ˆì‹œì˜ ê°€ë…ì„±ì„ ìœ„í•´ form handlingê³¼ ê²€ì¦(ZodÂ·Valibot ë“±)ì€ ìƒëµí–ˆìŠµë‹ˆë‹¤.
ìì„¸í•œ ë‚´ìš©ì€ [Type Validation and Schemas](/docs/guides/examples/types#type-validation-schemas-and-zod)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.

:::

```ts title="shared/api/endpoints/login.ts"
import { client } from '../client';

export interface LoginCredentials {
  email: string;
  password: string;
}

export function login(credentials: LoginCredentials) {
  return client.post('/login', credentials);
}
```

`shared/api/index.ts`ì—ì„œ request í•¨ìˆ˜ì™€ íƒ€ì…ì„ ë‚´ë³´ë‚´ì„¸ìš”:

```ts title="shared/api/index.ts"
export { client } from './client'; // If you want to export the client itself
export { login } from './endpoints/login';
export type { LoginCredentials } from './endpoints/login';
```

## Slice-specific API Requests

íŠ¹ì • í˜ì´ì§€ë‚˜ featureì—ì„œë§Œ ì“°ì´ëŠ” requestëŠ” í•´ë‹¹ sliceì˜ api í´ë”ì— ë‘ì–´ ì •ë¦¬í•˜ì„¸ìš”.
ì´ë ‡ê²Œ í•˜ë©´ sliceë³„ ë¡œì§ì´ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬ë©ë‹ˆë‹¤.

- ğŸ“‚ pages
    - ğŸ“‚ login
        - ğŸ“„ index.ts
        - ğŸ“‚ api
            - ğŸ“„ login.ts
        - ğŸ“‚ ui
            - ğŸ“„ LoginPage.tsx

```ts title="pages/login/api/login.ts"
import { client } from 'shared/api';

interface LoginCredentials {
  email: string;
  password: string;
}

export function login(credentials: LoginCredentials) {
  return client.post('/login', credentials);
}
```

ì´ í•¨ìˆ˜ëŠ” ì¬ì‚¬ìš© ê°€ëŠ¥ì„±ì´ ë‚®ìœ¼ë¯€ë¡œ, sliceì˜ public APIë¡œ ë‚´ë³´ë‚¼ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

:::note

entities layerì— API requestì™€ response íƒ€ì…ì„ ë°°ì¹˜í•˜ì§€ ë§ˆì„¸ìš”.
ë°±ì—”ë“œ response íƒ€ì…ê³¼ í”„ë¡ íŠ¸ì—”ë“œ `entities` íƒ€ì…ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`shared/api`ë‚˜ sliceì˜ `api` í´ë”ì—ì„œ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ê³ , entitiesëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê´€ì ì— ì§‘ì¤‘í•˜ë„ë¡ ì„¤ê³„í•˜ì„¸ìš”.

:::

## API íƒ€ì…ê³¼ í´ë¼ì´ì–¸íŠ¸ ìë™ ìƒì„±

ë°±ì—”ë“œì— OpenAPI ìŠ¤í™ì´ ìˆë‹¤ë©´ [orval](https://orval.dev/)ì´ë‚˜ [openapi-typescript](https://openapi-ts.dev/) ê°™ì€ ë„êµ¬ë¡œ API íƒ€ì…ê³¼ request í•¨ìˆ˜ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ìƒì„±ëœ ì½”ë“œëŠ” `shared/api/openapi` ë“±ì— ë‘ê³  `README.md`ì— ìƒì„± ë°©ë²•ê³¼ íƒ€ì… ì„¤ëª…ì„ ë¬¸ì„œí™”í•˜ì„¸ìš”.

## ì„œë²„ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ë™

[TanStack Query (React Query)](https://tanstack.com/query/latest)ë‚˜ [Pinia Colada](https://pinia-colada.esm.dev/) ê°™ì€ ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” slice ê°„ íƒ€ì…ì´ë‚˜ cache keyë¥¼ ê³µìœ í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŸ´ ë•ŒëŠ” `shared` layerì— ë‹¤ìŒì„ ë°°ì¹˜í•˜ì„¸ìš”.

- API ë°ì´í„° íƒ€ì… (API data types)
- ìºì‹œ í‚¤ (cache keys)
- ê³µí†µ query/mutation ì˜µì…˜ (common query/mutation options)
