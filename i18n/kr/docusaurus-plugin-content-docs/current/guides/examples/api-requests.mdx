---
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Handling API Requests

## Shared API Requests

ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” API ìš”ì²­ ë¡œì§ì€ `shared/api` í´ë”ì— ë³´ê´€í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.  
ì´ë ‡ê²Œ í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ **ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì¬ì‚¬ìš©**í•  ìˆ˜ ìˆê³ ,  
ì´ˆê¸° êµ¬í˜„ ì†ë„(í”„ë¡œí† íƒ€ì´í•‘)ë„ ë¹ ë¥´ê²Œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ êµ¬ì¡°ì™€ `client.ts` ì„¤ì •ë§Œìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.

ì¼ë°˜ì ì¸ íŒŒì¼ êµ¬ì¡° ì˜ˆì‹œ:

```bash
- ğŸ“‚ shared
    - ğŸ“‚ api
        - ğŸ“„ client.ts
        - ğŸ“„ index.ts
        - ğŸ“‚ endpoints
            - ğŸ“„ login.ts
```

`client.ts` íŒŒì¼ì€ ëª¨ë“  HTTP request ê´€ë ¨ ì„¤ì •ì„ **í•œ ê³³ì—ì„œ** ê´€ë¦¬í•©ë‹ˆë‹¤.  
ì¦‰, ê³µí†µ ì„¤ì •ì„ clientì— ëª¨ì•„ë‘ë©´ ê°œë³„ endpoint ë¡œì§ì—ì„œëŠ” **requestë¥¼ ë³´ë‚´ëŠ” ë°ë§Œ** ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`client.ts`ì—ì„œëŠ” ë‹¤ìŒ í•­ëª©ë“¤ì„ ì„¤ì •í•©ë‹ˆë‹¤:


- ë°±ì—”ë“œ ê¸°ë³¸ URL  
- Default headers (ì˜ˆ: ì¸ì¦ header)  
- JSON ì§ë ¬í™”/íŒŒì‹±  

ì•„ë˜ ì˜ˆì‹œì—ì„œ axios ë²„ì „ê³¼ fetch ë²„ì „ ëª¨ë‘ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Tabs>

<TabItem value="axios" label="Axios">
```ts title="shared/api/client.ts"
// Axios ì˜ˆì‹œ
import axios from 'axios';

export const client = axios.create({
  baseURL: 'https://your-api-domain.com/api/',
  timeout: 5000,
  headers: { 'X-Custom-Header': 'my-custom-value' }
});
```
</TabItem>

<TabItem value="fetch" label="Fetch">
```ts title="shared/api/client.ts"
export const client = {
  async post(endpoint: string, body: any, options?: RequestInit) {
    const response = await fetch(`https://your-api-domain.com/api${endpoint}`, {
      method: 'POST',
      body: JSON.stringify(body),
      ...options,
      headers: {
        'Content-Type': 'application/json',
        'X-Custom-Header': 'my-custom-value',
        ...options?.headers,
      },
    });
    return response.json();
  }
  // ... other methods like put, delete, etc.
};
```
</TabItem>

</Tabs>

ì´ì œ `shared/api/endpoints` í´ë” ì•ˆì— API endpointë³„ request í•¨ìˆ˜ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.  
ì´ë ‡ê²Œ endpoint ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•´ë‘ë©´ API ë³€ê²½ì´ ìˆì„ ë•Œ ìœ ì§€ë³´ìˆ˜ê°€ ë§¤ìš° ì‰¬ì›Œì§‘ë‹ˆë‹¤.

:::note

ì˜ˆì œë¥¼ ë‹¨ìˆœí™”í•˜ê¸° ìœ„í•´ form handlingì´ë‚˜ ì…ë ¥ ê²€ì¦(Zod/Valibot)ì€ ìƒëµí–ˆìŠµë‹ˆë‹¤.  
í•„ìš”í•˜ë‹¤ë©´ ì•„ë˜ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”:   
[Type Validation and Schemas](/docs/guides/examples/types#type-validation-schemas-and-zod)

:::

```ts title="shared/api/endpoints/login.ts"
import { client } from '../client';

export interface LoginCredentials {
  email: string;
  password: string;
}

export function login(credentials: LoginCredentials) {
  return client.post('/login', credentials);
}
```

ê·¸ë¦¬ê³  ë‹¤ìŒì²˜ëŸ¼ `shared/api/index.ts`ì—ì„œ request í•¨ìˆ˜ì™€ íƒ€ì…ë“¤ì„ ê³µê°œ APIë¡œ ë‚´ë³´ëƒ…ë‹ˆë‹¤:

```ts title="shared/api/index.ts"
export { client } from './client'; // If you want to export the client itself
export { login } from './endpoints/login';
export type { LoginCredentials } from './endpoints/login';
```

## Slice-specific API Requests

íŠ¹ì • í˜ì´ì§€ë‚˜ feature ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” requestëŠ” í•´ë‹¹ sliceì˜ api í´ë”ì— ë„£ì–´ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.  
ì´ë ‡ê²Œ í•˜ë©´ sliceë³„ ì½”ë“œê°€ ì„œë¡œ ì„ì´ì§€ ì•Šê³ , ì±…ì„ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ë©°, ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›Œì§‘ë‹ˆë‹¤.

ì˜ˆì‹œ êµ¬ì¡°:
```bash
- ğŸ“‚ pages
    - ğŸ“‚ login
        - ğŸ“„ index.ts
        - ğŸ“‚ api
            - ğŸ“„ login.ts
        - ğŸ“‚ ui
            - ğŸ“„ LoginPage.tsx
```

```ts title="pages/login/api/login.ts"
import { client } from 'shared/api';

interface LoginCredentials {
  email: string;
  password: string;
}

export function login(credentials: LoginCredentials) {
  return client.post('/login', credentials);
}
```

ì´ í•¨ìˆ˜ëŠ” **ë¡œê·¸ì¸ í˜ì´ì§€ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” API ìš”ì²­** ì´ë¯€ë¡œ  
sliceì˜ public API(`index.ts`)ë¡œ ë‹¤ì‹œ exportí•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.

:::note
entities layerì—ëŠ” **backend response íƒ€ì…**ì´ë‚˜ **API ìš”ì²­ í•¨ìˆ˜**ë¥¼ ì§ì ‘ ë‘ì§€ ë§ˆì„¸ìš”.  
ê·¸ ì´ìœ ëŠ” backend êµ¬ì¡°ì™€ `entities` êµ¬ì¡°ê°€ ì„œë¡œ **ì—­í• ê³¼ ì±…ì„ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤**.

- `shared/api` ë˜ëŠ” ê° sliceì˜ `api` í´ë”ì—ì„œëŠ” **ë°±ì—”ë“œì—ì„œ ì˜¨ ë°ì´í„°**ë¥¼ ë‹¤ë£¨ê³ ,
- `entities`ì—ì„œëŠ” **í”„ë¡ íŠ¸ì—”ë“œ ê´€ì ì—ì„œ í•„ìš”í•œ ë°ì´í„° êµ¬ì¡°**ì— ì§‘ì¤‘í•´ì•¼ í•©ë‹ˆë‹¤.  
  (ì˜ˆ: UI í‘œì‹œìš© ë°ì´í„°, ë„ë©”ì¸ ë¡œì§ ì²˜ë¦¬ìš© ë°ì´í„° ë“±)
:::

## API íƒ€ì…ê³¼ í´ë¼ì´ì–¸íŠ¸ ìë™ ìƒì„±

ë°±ì—”ë“œì— OpenAPI ìŠ¤í™ì´ ì¤€ë¹„ë˜ì–´ ìˆë‹¤ë©´,  
[orval](https://orval.dev/)ì´ë‚˜ [openapi-typescript](https://openapi-ts.dev/) ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•´  
**API íƒ€ì…ê³¼ request í•¨ìˆ˜**ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ ìƒì„±ëœ ì½”ë“œëŠ” ë³´í†µ `shared/api/openapi` ê°™ì€ í´ë”ì— ë‘ê³ ,  
`README.md`ì— ë‹¤ìŒ ë‚´ìš©ì„ í•¨ê»˜ ë¬¸ì„œí™”í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

- ìƒì„± ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì–´ë–»ê²Œ ì‹¤í–‰í•˜ëŠ”ì§€
- ì–´ë–¤ íƒ€ì…/í´ë¼ì´ì–¸íŠ¸ê°€ ìƒì„±ë˜ëŠ”ì§€
- ì‚¬ìš©í•˜ëŠ” ë°©ë²• ì˜ˆì‹œ

## ì„œë²„ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ë™

[TanStack Query (React Query)](https://tanstack.com/query/latest)ë‚˜ [Pinia Colada](https://pinia-colada.esm.dev/) ê°™ì€ **ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ”,  
ì„œë¡œ ë‹¤ë¥¸ sliceì—ì„œ **íƒ€ì…ì´ë‚˜ cache keyë¥¼ ê³µìœ **í•´ì•¼ í•  ë•Œê°€ ìì£¼ ìƒê¹ë‹ˆë‹¤.

ì´ëŸ° ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í•­ëª©ë“¤ì„ `shared` layerì— ë‘ê³  ê°™ì´ ì“°ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

- API ë°ì´í„° íƒ€ì… (API data types)  
- ìºì‹œ í‚¤ (cache keys)  
- ê³µí†µ query/mutation ì˜µì…˜ (common query/mutation options)  
