---
title: Slices and segments
sidebar_position: 2
pagination_next: reference/public-api
---

import useBaseUrl from '@docusaurus/useBaseUrl';

# Slices 和 segments

## Slices

Slices 是 Feature-Sliced Design 组织层次结构中的第二级。它们的主要目的是按其对产品、业务或应用程序的意义对代码进行分组。

Slices 的名称没有标准化，因为它们直接由您应用程序的业务领域决定。例如，照片库可能有 slices `photo`、`effects`、`gallery-page`。社交网络将需要不同的 slices，例如 `post`、`comments`、`news-feed`。

Layers Shared 和 App 不包含 slices。这是因为 Shared 应该不包含任何业务逻辑，因此对产品没有意义，而 App 应该只包含涉及整个应用程序的代码，所以不需要分割。

### 零耦合和高聚合 {#zero-coupling-high-cohesion}

Slices 旨在成为独立且高度聚合的代码文件组。下面的图形可能有助于可视化_聚合性_和_耦合性_这些复杂的概念：

<figure>
    <img src={useBaseUrl("/img/coupling-cohesion-light.svg#light-mode-only")} alt="" />
    <img src={useBaseUrl("/img/coupling-cohesion-dark.svg#dark-mode-only")} alt="" />
    <figcaption>
        Image inspired by https://enterprisecraftsmanship.com/posts/cohesion-coupling-difference/
    </figcaption>
</figure>

理想的 slice 独立于其 layer 上的其他 slices（零耦合）并包含与其主要目标相关的大部分代码（高聚合）。

The independence of slices is enforced by the [import rule on layers][layers--import-rule]:

> _A module (file) in a slice can only import other slices when they are located on layers strictly below._

### Public API rule on slices

Inside a slice, the code could be organized in any way that you want. That doesn't pose any issues as long as the slice provides a good public API for other slices to use it. This is enforced with the **public API rule on slices**:

> _Every slice (and segment on layers that don't have slices) must contain a public API definition._
>
> _Modules outside of this slice/segment can only reference the public API, not the internal file structure of the slice/segment._

Read more about the rationale of public APIs and the best practices on creating one in the [Public API reference][ref-public-api].

### Slice groups

Closely related slices can be structurally grouped in a folder, but they should exercise the same isolation rules as other slices — there should be **no code sharing** in that folder.

![Features "compose", "like" and "delete" grouped in a folder "post". In that folder there is also a file "some-shared-code.ts" that is crossed out to imply that it's not allowed.](/img/graphic-nested-slices.svg)

## Segments

Segments are the third and final level in the organizational hierarchy, and their purpose is to group code by its technical nature.

There a few standardized segment names:

- `ui` — everything related to UI display: UI components, date formatters, styles, etc.
- `api` — backend interactions: request functions, data types, mappers, etc.
- `model` — the data model: schemas, interfaces, stores, and business logic.
- `lib` — library code that other modules on this slice need.
- `config` — configuration files and feature flags.

See the [Layers page][layers--layer-definitions] for examples of what each of these segments might be used for on different layers.

You can also create custom segments. The most common places for custom segments are the App layer and the Shared layer, where slices don't make sense.

Make sure that the name of these segments describes the purpose of the content, not its essence. For example, `components`, `hooks`, and `types` are bad segment names because they aren't that helpful when you're looking for code.

[layers--layer-definitions]: /docs/reference/layers#layer-definitions
[layers--import-rule]: /docs/reference/layers#import-rule-on-layers
[ref-public-api]: /docs/reference/public-api
