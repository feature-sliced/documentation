---
sidebar_position: 10
---
# 与 NuxtJS 一起使用

可以在 NuxtJS 项目中实现 FSD，但由于 NuxtJS 项目结构要求与 FSD 原则之间的差异，会产生冲突：

- 最初，NuxtJS 提供的项目文件结构没有 `src` 文件夹，即在项目的根目录中。
- 文件路由在 `pages` 文件夹中，而在 FSD 中，此文件夹保留用于扁平 slice 结构。


## 为 `src` 目录添加别名

将 `alias` 对象添加到您的配置中：
```ts title="nuxt.config.ts"
export default defineNuxtConfig({
  devtools: { enabled: true }, // Not FSD related, enabled at project startup
  alias: {
    "@": '../src'
  },
})
```
## 选择如何配置路由器

在 NuxtJS 中，有两种自定义路由的方法 - 使用配置和使用文件结构。
在基于文件的路由情况下，您将在 app/routes 目录内的文件夹中创建 index.vue 文件，在配置情况下，您将在 `router.options.ts` 文件中配置路由器。


### 使用配置进行路由

在 `app` 层中，创建一个 `router.options.ts` 文件，并从中导出配置对象：
```ts title="app/router.options.ts"
import type { RouterConfig } from '@nuxt/schema';

export default <RouterConfig> {
  routes: (_routes) => [],
};

```

要向项目添加 `Home` 页面，您需要执行以下步骤：
- 在 `pages` 层内添加页面 slice
- 将适当的路由添加到 `app/router.config.ts` 配置中


要创建页面 slice，让我们使用 [CLI](https://github.com/feature-sliced/cli)：

```shell
fsd pages home
```

Create a ``home-page.vue`` file inside the ui segment, access it using the Public API

```ts title="src/pages/home/index.ts"
export { default as HomePage } from './ui/home-page';
```

Thus, the file structure will look like this:
```sh
|── src
│   ├── app
│   │   ├── router.config.ts
│   ├── pages
│   │   ├── home
│   │   │   ├── ui
│   │   │   │   ├── home-page.vue
│   │   │   ├── index.ts
```
Finally, let's add a route to the config:

```ts title="app/router.config.ts"
import type { RouterConfig } from '@nuxt/schema'

export default <RouterConfig> {
  routes: (_routes) => [
    {
      name: 'home',
      path: '/',
      component: () => import('@/pages/home.vue').then(r => r.default || r)
    }
  ],
}
```

### 文件路由

首先，在项目根目录中创建一个`src`目录，并在此目录内创建app和pages层，以及在app层内创建一个routes文件夹。
因此，你的文件结构应该如下所示：

```sh
├── src
│   ├── app
│   │   ├── routes
│   ├── pages                         # Pages folder, related to FSD
```

In order for NuxtJS to use the routes folder inside the `app` layer for file routing, you need to modify `nuxt.config.ts` as follows:
```ts title="nuxt.config.ts"
export default defineNuxtConfig({
  devtools: { enabled: true }, // Not FSD related, enabled at project startup
  alias: {
    "@": '../src'
  },
  dir: {
    pages: './src/app/routes'
  }
})
```

现在，你可以在`app`内为页面创建路由，并将`pages`中的页面连接到它们。

For example, to add a `Home` page to your project, you need to do the following steps:
- Add a page slice inside the `pages` layer
- Add the corresponding route inside the `app` layer
- Connect the page from the slice with the route

To create a page slice, let's use the [CLI](https://github.com/feature-sliced/cli):

```shell
fsd pages home
```

Create a ``home-page.vue`` file inside the ui segment, access it using the Public API

```ts title="src/pages/home/index.ts"
export { default as HomePage } from './ui/home-page';
```

Create a route for this page inside the `app` layer:

```sh

├── src
│   ├── app
│   │   ├── routes
│   │   │   ├── index.vue
│   ├── pages
│   │   ├── home
│   │   │   ├── ui
│   │   │   │   ├── home-page.vue
│   │   │   ├── index.ts
```

Add your page component inside the `index.vue` file:

```html title="src/app/routes/index.vue"
<script setup>
  import { HomePage } from '@/pages/home';
</script>

<template>
  <HomePage/>
</template>
```

## What to do with `layouts`?

You can place layouts inside the `app` layer, to do this you need to modify the config as follows:

```ts title="nuxt.config.ts"
export default defineNuxtConfig({
  devtools: { enabled: true }, // Not related to FSD, enabled at project startup
  alias: {
    "@": '../src'
  },
  dir: {
    pages: './src/app/routes',
    layouts: './src/app/layouts'
  }
})
```


## See also

- [Documentation on changing directory config in NuxtJS](https://nuxt.com/docs/api/nuxt-config#dir)
- [Documentation on changing router config in NuxtJS](https://nuxt.com/docs/guide/recipes/custom-routing#router-config)
- [Documentation on changing aliases in NuxtJS](https://nuxt.com/docs/api/nuxt-config#alias)

