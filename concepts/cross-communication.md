# Взаимодействие модулей приложения

В рамках методологии все модули [**распределены по слоям (слайсам)**](../intro/abstractions.md#-group-slices) - зонам ответственности. Слои, в свою очередь, организованы вертикально: "внизу" находятся переиспользуемые модули (ui-kit, внутренние библиотеки проекта), как наиболее абстрактные, а по мере продвижения "вверх" располагаются более специфичные модули. 

Независимо от принадлежности к какому либо слайсу каждый модуль [**обязан предоставлять публичный интерфейс доступа**](https://github.com/feature-sliced/wiki/blob/master/concepts/public-api.md).

## Требования

Взаимодействие каждого модуля с остальным приложением проектируется с учетом ряда требований:

1. **Слабое зацепление** с другими модулями
    > изменение в одном модуле должно слабо и **предсказуемо** влиять на другие
2. **Высокая связность** - обязанности каждого модуля "сфокусированы" на одной задаче
    > если модуль имеет слишком много ответственностей (начинает "делать слишком много") - это должно быть замечено как можно раньше
3. **Отстутствие циклических зависимостей** на масштабе всего приложения
    > часто приводят к неожиданному, нежелательному поведению, лучше избегать их совсем
 
 ## Правило

Для выполнения этих требований, в рамках методологии, необходимо соблюдать базовое правило:

**Модуль может зависеть только от "нижележащих" модулей, но не от модулей с того же или более высокого слоя**

  - `features/auth` **не может** зависеть от `features/filters` **и наоборот**
  - `features/auth` **может** зависеть от `shared/ui/button`, **но не наоборот**

Следование этому правилу позволяет поддерживать зависимости **"однонаправленными"** - что автоматически **исключает циклические импорты** и значительно **упрощает отслеживание зависимостей** между модулями в приложении.

<!-- 
TODO После накопления опыта работы с методологией сделать этот блок более подробным
-->
Нарушение этого правила является сигналом проблем:

1. Модуль имеет **импорт из другого модуля** со своего слоя
    - Возможно, модуль был **излишне раздроблен** или имеет **лишнюю ответственность.**
    - Следует **объединить** его с импортируемым модулем или **вынести его (частично или целиком) на слой ниже** или перенести логику связей в модули на вышестоящих слоях.
1. Модуль **импортируется многими модулями** со своего слоя
    - Возможно, модуль имеет **лишнюю ответственность.**
    - Следует **вынести его (частично или целиком) на слой ниже**, либо перенести логику связей в модули на вышестоящих слоях.
1. Модуль **имеет импорты из множества модулей** со своего слоя
    - Возможно, модуль принадлежит к другой области ответственности.
    - Следует **вынести его (частично или целиком) на слой выше**.
