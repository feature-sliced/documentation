"use strict";(self.webpackChunk_feature_sliced_documentation=self.webpackChunk_feature_sliced_documentation||[]).push([["8856"],{1891:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>c,toc:()=>a,default:()=>p,metadata:()=>r,assets:()=>d,contentTitle:()=>o});var r=JSON.parse('{"id":"guides/tech/with-electron","title":"\u4E0E Electron \u4E00\u8D77\u4F7F\u7528","description":"Electron \u5E94\u7528\u7A0B\u5E8F\u5177\u6709\u7279\u6B8A\u7684\u67B6\u6784\uFF0C\u7531\u5177\u6709\u4E0D\u540C\u804C\u8D23\u7684\u591A\u4E2A\u8FDB\u7A0B\u7EC4\u6210\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u5E94\u7528 FSD \u9700\u8981\u5C06\u7ED3\u6784\u9002\u5E94 Electron \u7684\u7279\u6027\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/guides/tech/with-electron.mdx","sourceDirName":"guides/tech","slug":"/guides/tech/with-electron","permalink":"/documentation/zh/docs/guides/tech/with-electron","draft":false,"unlisted":false,"editUrl":"https://github.com/feature-sliced/documentation/edit/master/i18n/zh/docusaurus-plugin-content-docs/current/guides/tech/with-electron.mdx","tags":[],"version":"current","lastUpdatedAt":1770123970000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"docsSidebar","previous":{"title":"\u4E0E Next.js \u4E00\u8D77\u4F7F\u7528","permalink":"/documentation/zh/docs/guides/tech/with-nextjs"},"next":{"title":"\u4E0E NuxtJS \u4E00\u8D77\u4F7F\u7528","permalink":"/documentation/zh/docs/guides/tech/with-nuxtjs"}}'),s=t(5813),i=t(6436);let c={sidebar_position:10},o="\u4E0E Electron \u4E00\u8D77\u4F7F\u7528",d={},a=[{value:"\u516C\u5171 API \u89C4\u5219",id:"\u516C\u5171-api-\u89C4\u5219",level:2},{value:"\u989D\u5916\u66F4\u6539\u6807\u51C6\u7ED3\u6784",id:"\u989D\u5916\u66F4\u6539\u6807\u51C6\u7ED3\u6784",level:2},{value:"\u4EA4\u4E92\u793A\u4F8B",id:"\u4EA4\u4E92\u793A\u4F8B",level:2},{value:"\u53E6\u8BF7\u53C2\u9605",id:"\u53E6\u8BF7\u53C2\u9605",level:2}];function l(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u4E0E-electron-\u4E00\u8D77\u4F7F\u7528",children:"\u4E0E Electron \u4E00\u8D77\u4F7F\u7528"})}),"\n",(0,s.jsx)(n.p,{children:"Electron \u5E94\u7528\u7A0B\u5E8F\u5177\u6709\u7279\u6B8A\u7684\u67B6\u6784\uFF0C\u7531\u5177\u6709\u4E0D\u540C\u804C\u8D23\u7684\u591A\u4E2A\u8FDB\u7A0B\u7EC4\u6210\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u5E94\u7528 FSD \u9700\u8981\u5C06\u7ED3\u6784\u9002\u5E94 Electron \u7684\u7279\u6027\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"\u2514\u2500\u2500 src\n    \u251C\u2500\u2500 app                                 # Common app layer\n    \u2502   \u251C\u2500\u2500 main                            # Main process\n    \u2502   \u2502   \u2514\u2500\u2500 index.ts                    # Main process entry point\n    \u2502   \u251C\u2500\u2500 preload                         # Preload script and Context Bridge\n    \u2502   \u2502   \u2514\u2500\u2500 index.ts                    # Preload entry point\n    \u2502   \u2514\u2500\u2500 renderer                        # Renderer process\n    \u2502       \u2514\u2500\u2500 index.html                  # Renderer process entry point\n    \u251C\u2500\u2500 main\n    \u2502   \u251C\u2500\u2500 features\n    \u2502   \u2502   \u2514\u2500\u2500 user\n    \u2502   \u2502       \u2514\u2500\u2500 ipc\n    \u2502   \u2502           \u251C\u2500\u2500 get-user.ts\n    \u2502   \u2502           \u2514\u2500\u2500 send-user.ts\n    \u2502   \u251C\u2500\u2500 entities\n    \u2502   \u2514\u2500\u2500 shared\n    \u251C\u2500\u2500 renderer\n    \u2502   \u251C\u2500\u2500 pages\n    \u2502   \u2502   \u251C\u2500\u2500 settings\n    \u2502   \u2502   \u2502   \u251C\u2500\u2500 ipc\n    \u2502   \u2502   \u2502   \u2502   \u251C\u2500\u2500 get-user.ts\n    \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 save-user.ts\n    \u2502   \u2502   \u2502   \u251C\u2500\u2500 ui\n    \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 user.tsx\n    \u2502   \u2502   \u2502   \u2514\u2500\u2500 index.ts\n    \u2502   \u2502   \u2514\u2500\u2500 home\n    \u2502   \u2502       \u251C\u2500\u2500 ui\n    \u2502   \u2502       \u2502   \u2514\u2500\u2500 home.tsx\n    \u2502   \u2502       \u2514\u2500\u2500 index.ts\n    \u2502   \u251C\u2500\u2500 widgets\n    \u2502   \u251C\u2500\u2500 features\n    \u2502   \u251C\u2500\u2500 entities\n    \u2502   \u2514\u2500\u2500 shared\n    \u2514\u2500\u2500 shared                              # Common code between main and renderer\n        \u2514\u2500\u2500 ipc                             # IPC description (event names, contracts)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u516C\u5171-api-\u89C4\u5219",children:"\u516C\u5171 API \u89C4\u5219"}),"\n",(0,s.jsxs)(n.p,{children:["\u6BCF\u4E2A\u8FDB\u7A0B\u5FC5\u987B\u6709\u81EA\u5DF1\u7684\u516C\u5171 API\u3002\u4F8B\u5982\uFF0C\u60A8\u4E0D\u80FD\u5C06\u6A21\u5757\u4ECE ",(0,s.jsx)(n.code,{children:"main"})," \u5BFC\u5165\u5230 ",(0,s.jsx)(n.code,{children:"renderer"}),"\u3002\n\u53EA\u6709 ",(0,s.jsx)(n.code,{children:"src/shared"})," \u6587\u4EF6\u5939\u5BF9\u4E24\u4E2A\u8FDB\u7A0B\u90FD\u662F\u516C\u5171\u7684\u3002\n\u63CF\u8FF0\u8FDB\u7A0B\u4EA4\u4E92\u7684\u5951\u7EA6\u4E5F\u662F\u5FC5\u8981\u7684\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u989D\u5916\u66F4\u6539\u6807\u51C6\u7ED3\u6784",children:"\u989D\u5916\u66F4\u6539\u6807\u51C6\u7ED3\u6784"}),"\n",(0,s.jsxs)(n.p,{children:["\u5EFA\u8BAE\u4F7F\u7528\u65B0\u7684 ",(0,s.jsx)(n.code,{children:"ipc"})," \u6BB5\uFF0C\u5176\u4E2D\u8FDB\u7A0B\u4E4B\u95F4\u7684\u4EA4\u4E92\u53D1\u751F\u3002\n",(0,s.jsx)(n.code,{children:"pages"})," \u548C ",(0,s.jsx)(n.code,{children:"widgets"})," \u5C42\uFF0C\u57FA\u4E8E\u5176\u540D\u79F0\uFF0C\u4E0D\u5E94\u51FA\u73B0\u5728 ",(0,s.jsx)(n.code,{children:"src/main"})," \u4E2D\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"features"}),"\u3001",(0,s.jsx)(n.code,{children:"entities"})," \u548C ",(0,s.jsx)(n.code,{children:"shared"}),"\u3002\n",(0,s.jsx)(n.code,{children:"src/app"})," \u5C42\u4E2D\u7684 ",(0,s.jsx)(n.code,{children:"app"})," \u5C42\u5305\u542B ",(0,s.jsx)(n.code,{children:"main"})," \u548C ",(0,s.jsx)(n.code,{children:"renderer"})," \u7684\u5165\u53E3\u70B9\uFF0C\u4EE5\u53CA IPC\u3002\n\u4E0D\u5E0C\u671B ",(0,s.jsx)(n.code,{children:"app"})," \u5C42\u4E2D\u7684\u6BB5\u6709\u4EA4\u96C6"]}),"\n",(0,s.jsx)(n.h2,{id:"\u4EA4\u4E92\u793A\u4F8B",children:"\u4EA4\u4E92\u793A\u4F8B"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="src/shared/ipc/channels.ts"',children:"export const CHANNELS = {\n    GET_USER_DATA: 'GET_USER_DATA',\n    SAVE_USER: 'SAVE_USER',\n} as const;\n\nexport type TChannelKeys = keyof typeof CHANNELS;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="src/shared/ipc/events.ts"',children:"import { CHANNELS } from './channels';\n\nexport interface IEvents {\n    [CHANNELS.GET_USER_DATA]: {\n        args: void,\n        response?: { name: string; email: string; };\n    };\n    [CHANNELS.SAVE_USER]: {\n        args: { name: string; };\n        response: void;\n    };\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="src/shared/ipc/preload.ts"',children:"import { CHANNELS } from './channels';\nimport type { IEvents } from './events';\n\ntype TOptionalArgs<T> = T extends void ? [] : [args: T];\n\nexport type TElectronAPI = {\n    [K in keyof typeof CHANNELS]: (...args: TOptionalArgs<IEvents[typeof CHANNELS[K]]['args']>) => IEvents[typeof CHANNELS[K]]['response'];\n};\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="src/app/preload/index.ts"',children:"import { contextBridge, ipcRenderer } from 'electron';\nimport { CHANNELS, type TElectronAPI } from 'shared/ipc';\n\nconst API: TElectronAPI = {\n    [CHANNELS.GET_USER_DATA]: () => ipcRenderer.sendSync(CHANNELS.GET_USER_DATA),\n    [CHANNELS.SAVE_USER]: args => ipcRenderer.invoke(CHANNELS.SAVE_USER, args),\n} as const;\n\ncontextBridge.exposeInMainWorld('electron', API);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="src/main/features/user/ipc/send-user.ts"',children:"import { ipcMain } from 'electron';\nimport { CHANNELS } from 'shared/ipc';\n\nexport const sendUser = () => {\n    ipcMain.on(CHANNELS.GET_USER_DATA, ev => {\n        ev.returnValue = {\n            name: 'John Doe',\n            email: 'john.doe@example.com',\n        };\n    });\n};\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="src/renderer/pages/user-settings/ipc/get-user.ts"',children:"import { CHANNELS } from 'shared/ipc';\n\nexport const getUser = () => {\n    const user = window.electron[CHANNELS.GET_USER_DATA]();\n\n    return user ?? { name: 'John Donte', email: 'john.donte@example.com' };\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u53E6\u8BF7\u53C2\u9605",children:"\u53E6\u8BF7\u53C2\u9605"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.electronjs.org/docs/latest/tutorial/process-model",children:"Process Model Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.electronjs.org/docs/latest/tutorial/context-isolation",children:"Context Isolation Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.electronjs.org/docs/latest/tutorial/ipc",children:"Inter-Process Communication Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/feature-sliced/examples/tree/master/examples/electron",children:"Example"})}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},6436:function(e,n,t){t.d(n,{R:()=>c,x:()=>o});var r=t(9729);let s={},i=r.createContext(s);function c(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);