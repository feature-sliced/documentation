"use strict";(self.webpackChunk_feature_sliced_documentation=self.webpackChunk_feature_sliced_documentation||[]).push([["475"],{1621:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>c,toc:()=>u,default:()=>x,metadata:()=>i,assets:()=>d,contentTitle:()=>o});var i=JSON.parse('{"id":"guides/issues/desegmented","title":"Desegmentation","description":"Desegmentation (also known as horizontal slicing or packaging by layer) is a code organization pattern where files are grouped by their technical roles rather than by the business domains they serve. This means code with similar technical functions is stored in the same place, regardless of the business logic it handles.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/guides/issues/desegmented.mdx","sourceDirName":"guides/issues","slug":"/guides/issues/desegmented","permalink":"/zh/docs/guides/issues/desegmented","draft":false,"unlisted":false,"editUrl":"https://github.com/feature-sliced/documentation/edit/master/i18n/en/docusaurus-plugin-content-docs/current/guides/issues/desegmented.mdx","tags":[],"version":"current","lastUpdatedAt":1770909109000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"\u4E0E SvelteKit \u4E00\u8D77\u4F7F\u7528","permalink":"/zh/docs/guides/tech/with-sveltekit"},"next":{"title":"\u8DEF\u7531","permalink":"/zh/docs/guides/issues/routes"}}'),l=s(5813),r=s(6436),t=s(6997),a=s(1732);let c={sidebar_position:2},o="Desegmentation",d={},u=[{value:"The Problem",id:"the-problem",level:2},{value:"Solution",id:"solution",level:2},{value:"See Also",id:"see-also",level:2}];function h(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"desegmentation",children:"Desegmentation"})}),"\n",(0,l.jsx)(n.p,{children:"Desegmentation (also known as horizontal slicing or packaging by layer) is a code organization pattern where files are grouped by their technical roles rather than by the business domains they serve. This means code with similar technical functions is stored in the same place, regardless of the business logic it handles."}),"\n",(0,l.jsx)(n.p,{children:"This approach is popular in meta-frameworks like Next and Nuxt due to its simplicity, as it's easy to get started and enables features like auto-imports and file-based routing:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} app","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} components","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} DeliveryCard.jsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} DeliveryChoice.jsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} RegionSelect.jsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} UserAvatar.jsx"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} actions","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} delivery.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} region.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} user.js"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} composables","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} delivery.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} region.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} user.js"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} constants","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} delivery.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} region.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} user.js"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} utils","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} delivery.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} region.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} user.js"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} stores","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} delivery","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} getters.js"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} actions.js"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This pattern also occurs in FSD codebases, in the form of generic folders:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} features","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} delivery","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} ui","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C2} components \u26A0\uFE0F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} entities","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} recommendations","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C2} utils \u26A0\uFE0F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Files can also be a source of desegmentation. Files like ",(0,l.jsx)(n.code,{children:"types.ts"})," can aggregate multiple domains, complicating navigation and future refactoring, especially in layers like ",(0,l.jsx)(n.code,{children:"pages"})," or ",(0,l.jsx)(n.code,{children:"widgets"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} pages","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} delivery","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} index.ts"}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} ui","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} DeliveryCard.tsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} DeliveryChoice.tsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} UserAvatar.tsx"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} model","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} types.ts \u26A0\uFE0F"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} utils.ts \u26A0\uFE0F"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} api","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} endpoints.ts \u26A0\uFE0F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.A,{children:[(0,l.jsx)(a.A,{value:"types.ts",label:"types.ts",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",metastring:'title="pages/delivery/model/types.ts"',children:"// \u274C Bad: Mixed business domains in generic file\nexport interface DeliveryOption {\n  id: string;\n  name: string;\n  price: number;\n}\n\nexport interface UserInfo {\n  id: string;\n  name: string;\n  avatar: string;\n}\n"})})}),(0,l.jsx)(a.A,{value:"utils.ts",label:"utils.ts",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",metastring:'title="pages/delivery/model/utils.ts"',children:"// \u274C Bad: Mixed business domains in generic file\nexport function formatDeliveryPrice(price: number) {\n  return `$${price.toFixed(2)}`;\n}\n\nexport function getUserInitials(name: string) {\n  return name.split(' ').map(n => n[0]).join('');\n}\n"})})}),(0,l.jsx)(a.A,{value:"endpoints.ts",label:"endpoints.ts",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",metastring:'title="pages/delivery/api/endpoints.ts"',children:"// \u274C Bad: Mixed business domains in generic file\nexport async function fetchDeliveryOptions() { /* ... */ }\nexport async function fetchUserInfo() { /* ... */ }\n"})})})]}),"\n",(0,l.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,l.jsx)(n.p,{children:"While this structure is easy to start with, it can lead to scalability issues in larger projects:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Low Cohesion: Modifying a single feature often requires editing files in multiple large folders, such as ",(0,l.jsx)(n.code,{children:"pages"}),", ",(0,l.jsx)(n.code,{children:"components"}),", and ",(0,l.jsx)(n.code,{children:"stores"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Tight Coupling: Components can have unexpected dependencies, leading to complex and tangled dependency chains."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Difficult Refactoring: It requires additional effort to manually extract code related to a specific domain."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,l.jsx)(n.p,{children:"Group all code that relates to a specific domain in one place."}),"\n",(0,l.jsxs)(n.p,{children:["Avoid generic folder names such as ",(0,l.jsx)(n.code,{children:"types"}),", ",(0,l.jsx)(n.code,{children:"components"}),", ",(0,l.jsx)(n.code,{children:"utils"}),", as well as generic file names like ",(0,l.jsx)(n.code,{children:"types.ts"}),", ",(0,l.jsx)(n.code,{children:"utils.ts"}),", or ",(0,l.jsx)(n.code,{children:"helpers.ts"}),". Instead, use names that directly reflect the domain they represent."]}),"\n",(0,l.jsxs)(n.p,{children:["Avoid generic file names like ",(0,l.jsx)(n.code,{children:"types.ts"})," if possible, especially in slices with multiple domains:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} pages","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} delivery","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} index.tsx"}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} ui","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} DeliveryPage.tsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} DeliveryCard.tsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} DeliveryChoice.tsx"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} UserInfo.tsx"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u{1F4C2} model","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} delivery.ts"}),"\n",(0,l.jsx)(n.li,{children:"\u{1F4C4} user.ts"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://enterprisecraftsmanship.com/posts/cohesion-coupling-difference/",children:"(Article) About Low Coupling and High Cohesion clearly"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://medium.com/german-gorelkin/low-coupling-high-cohesion-d36369fb1be9",children:"(Article) Low Coupling and High Cohesion. The Law of Demeter"})}),"\n"]})]})}function x(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},1732:function(e,n,s){s.d(n,{A:()=>r});var i=s(5813);s(9729);var l=s(4014);function r({children:e,hidden:n,className:s}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,l.A)("tabItem_TKLW",s),hidden:n,children:e})}},6997:function(e,n,s){s.d(n,{A:()=>v});var i=s(5813),l=s(9729),r=s(4014),t=s(6620),a=s(6027),c=s(5470),o=s(6111),d=s(2012),u=s(1269),h=s(4508);function x(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}var j=s(781);function m({className:e,block:n,selectedValue:s,selectValue:l,tabValues:t}){let c=[],{blockElementScrollPositionUntilNextRender:o}=(0,a.a_)(),d=e=>{let n=e.currentTarget,i=t[c.indexOf(n)].value;i!==s&&(o(n),l(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let s=c.indexOf(e.currentTarget)+1;n=c[s]??c[0];break}case"ArrowLeft":{let s=c.indexOf(e.currentTarget)-1;n=c[s]??c[c.length-1]}}n?.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:l})=>(0,i.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{c.push(e)},onKeyDown:u,onClick:d,...l,className:(0,r.A)("tabs__item","tabItem_pNJB",l?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function f({lazy:e,children:n,selectedValue:s}){let t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=t.find(e=>e.props.value===s);return e?(0,l.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function g(e){let n=function(e){let n,{defaultValue:s,queryString:i=!1,groupId:r}=e,t=function(e){let{values:n,children:s}=e;return(0,l.useMemo)(()=>{let e=n??x(s).map(({props:{value:e,label:n,attributes:s,default:i}})=>({value:e,label:n,attributes:s,default:i})),i=(0,u.XI)(e,(e,n)=>e.value===n.value);if(i.length>0)throw Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,s])}(e),[a,j]=(0,l.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let s=n.find(e=>e.default)??n[0];if(!s)throw Error("Unexpected error: 0 tabValues");return s.value})({defaultValue:s,tabValues:t})),[m,f]=function({queryString:e=!1,groupId:n}){let s=(0,c.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(i),(0,l.useCallback)(e=>{if(!i)return;let n=new URLSearchParams(s.location.search);n.set(i,e),s.replace({...s.location,search:n.toString()})},[i,s])]}({queryString:i,groupId:r}),[g,v]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[s,i]=(0,h.Dv)(n);return[s,(0,l.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:r}),b=p({value:n=m??g,tabValues:t})?n:null;return(0,o.A)(()=>{b&&j(b)},[b]),{selectedValue:a,selectValue:(0,l.useCallback)(e=>{if(!p({value:e,tabValues:t}))throw Error(`Can't select invalid tab value=${e}`);j(e),f(e),v(e)},[f,v,t]),tabValues:t}}(e);return(0,i.jsxs)("div",{className:(0,r.A)(t.G.tabs.container,"tabs-container","tabList_nh3k"),children:[(0,i.jsx)(m,{...n,...e}),(0,i.jsx)(f,{...n,...e})]})}function v(e){let n=(0,j.A)();return(0,i.jsx)(g,{...e,children:x(e.children)},String(n))}},6436:function(e,n,s){s.d(n,{R:()=>t,x:()=>a});var i=s(9729);let l={},r=i.createContext(l);function t(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);